# Predictorium Session Summary — 14 Jan 2026

## Overview
- Stack: Next.js 16.1.1 (App Router), TypeScript 5, TailwindCSS 4
- Auth/DB: Supabase (@supabase/ssr, @supabase/supabase-js) with RLS
- Drag & Drop: @dnd-kit (core/sortable/modifiers)
- Lock: March 1st midnight (Europe/Prague) via luxon + SQL function

## Recent Changes (this session)
- F2 support: Editor now reads `searchParams.series` and loads F2 defaults when `?series=f2`.
- Header context: Shows `{type} - {series} Season {seasonYear}` (e.g., "PRIMARY - F2 Season 2026").
- Navigation: Back link and type-switch preserve the series parameter.
- Fixed TS import error: Reverted `import { SortableItem } from './sortable-item.tsx'` to `'./sortable-item'` to avoid TS5097.

## Known Issues
- Dev server hangs at `next dev` (no "Ready on http://localhost:3000").
  - Symptom present in VS Code and macOS Terminal; `next --version` works.
  - Likely cause: environment/FS interference (OneDrive) or a corrupted dependency cache.
- Folder removal during troubleshooting: `app/app/prediction` is currently missing from the workspace.
  - Impact: Prediction editor routes/pages won’t compile until restored.

## Current Workspace State
- Present: `app/app/f1-2026`, `app/app/f2-2026`, `app/app/layout.tsx`, `app/app/page.tsx`, `app/app/sign-out-button.tsx`.
- Missing: `app/app/prediction/[season_year]/[type]/` (deleted during troubleshooting).

## Next Recommended Actions
1. Move project outside OneDrive (to avoid file sync locks).
2. Reinstall dependencies:
   - `rm -rf node_modules .next package-lock.json`
   - `npm install`
3. Restore the prediction editor folder from last working state (git/backup):
   - `app/app/prediction/[season_year]/[type]/page.tsx`
   - `app/app/prediction/[season_year]/[type]/editor-wrapper.tsx`
   - `app/app/prediction/[season_year]/[type]/editor-client.tsx`
   - `app/app/prediction/[season_year]/[type]/sortable-item.tsx`
   - `app/app/prediction/[season_year]/[type]/actions.ts`
4. Start dev server in the new location: `npm run dev`.
5. If it still hangs, try `npx next dev --turbo` and capture output.

## Pending Features
- Read-only user prediction viewer.
- Latest Users per prediction (DB query and UI wiring).

## Notes
- F2 placeholder data lives in `lib/data/f2.ts` (`F2_ORDERED_LISTS`).
- Middleware `middleware.ts` protects `/app/*` and redirects `/login` when logged in.
- Lock UI and server actions were implemented; ensure DB and env vars are present in the moved project.
